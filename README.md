# DeployGate Resource

## Source Configuration

- `api_key` (string): *Required.* API key of a member or a group.
- `owner` (string): *Required.* User name or group name.

## Behaviour

### `out`: Push an app to DeployGate.

#### Parameters

- `file` (string): *Required.* Path to the file to upload. (`*.ipa` or `*.apk`)
- `message` (string): *Optional.* Description of the uploaded file.
- `message_file` (string): *Optional.* Path to a text file containing message.
   Use this instead of `message` to add a message dynamically generated by some tasks.
   If `message_file` is specified, `message` is ignored.

## Example Configuration

### Resource Configuration

```yaml
resource_types:
  - name: deploygate
    type: docker-image
    source:
      repository: yuukiaria/deploygate-resource

resources:
  - name: deploygate
    type: deploygate
    source:
      api_key: ((your-api-key))
      owner: mygroup
```

### Upload with a simple message

```yaml
jobs:
  - name: publish-to-deploygate
    plan:
      - task: build-apk
        file: ci/build-task # your build task that produces builds/myapp.apk
      - put: deploygate
        params:
          file: builds/myapp.apk
          message: This is a new release
```

### Upload with a generated message


```yaml
jobs:
  - name: publish-to-deploygate
    plan:
      - task: build-apk
        file: ci/tasks/build-task # your build task that produces builds/myapp.apk
      - task: create-message
        file: ci/tasks/create-message
      - put: deploygate
        params:
          file: builds/myapp.apk
          message_file: message/message.txt
```
